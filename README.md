# Aè‚¡è¡Œæƒ…å¯è§†åŒ–æœåŠ¡

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„é›¶é…ç½®Aè‚¡è‚¡ç¥¨åˆ†æå¯è§†åŒ–æœåŠ¡ï¼Œæä¾›å®æ—¶è¡Œæƒ…ã€æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ã€å…¬å¸ä¿¡æ¯å±•ç¤ºå’Œäº¤äº’å¼å›¾è¡¨ç”Ÿæˆã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ“Š æ•°æ®åˆ†æèƒ½åŠ›
- **6ä¸ªæ—¶é—´çª—å£**: T-0, T-3, T-7, T-30, T-90, T-180 å¤šç»´åº¦åˆ†æ
- **34ä¸ªæŠ€æœ¯æŒ‡æ ‡**: ä»·æ ¼ã€æˆäº¤é‡ã€ä¼°å€¼ã€é£é™©å…¨è¦†ç›–
- **æ™ºèƒ½æ•°æ®æº**: è‡ªåŠ¨åˆ‡æ¢ akShareã€æ–°æµªè´¢ç»ã€è…¾è®¯è´¢ç»ç­‰å¤šä¸ªæ•°æ®æº
- **æ¨¡æ‹Ÿæ•°æ®**: ç½‘ç»œæ•…éšœæ—¶è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡æ¼”ç¤ºæ•°æ®

### ğŸ¢ å…¬å¸ä¿¡æ¯å±•ç¤º âœ¨æ–°å¢
- **åŸºæœ¬ä¿¡æ¯**: å…¬å¸åç§°ã€å…¨ç§°ã€è¡Œä¸šåˆ†ç±»ã€æ‰€å±æ¿å—
- **ä¸Šå¸‚ä¿¡æ¯**: ä¸Šå¸‚å¸‚åœºã€çº³å…¥æ—¥æœŸã€ä¸Šå¸‚æ—¥æœŸã€æˆç«‹æ—¥æœŸ
- **è‚¡æœ¬ç»“æ„**: æ€»è‚¡æœ¬ã€æµé€šè‚¡æœ¬ã€æ³¨å†Œèµ„æœ¬
- **ç®¡ç†å±‚**: è‘£äº‹é•¿ä¿¡æ¯ã€å…¬å¸å®˜ç½‘

### ğŸ“ˆ å¯è§†åŒ–åŠŸèƒ½
- **äº¤äº’å¼å›¾è¡¨**: åŸºäºPlotlyçš„åŠ¨æ€å›¾è¡¨å±•ç¤º
- **HTMLæŠ¥å‘Š**: å®Œæ•´çš„åˆ†ææŠ¥å‘Šç”Ÿæˆ
- **çƒ­åŠ›å›¾**: å¤šè‚¡ç¥¨æŒ‡æ ‡å¯¹æ¯”åˆ†æ
- **é£é™©æ”¶ç›Šæ•£ç‚¹å›¾**: æŠ•èµ„ç»„åˆå¯è§†åŒ–

### ğŸš€ é«˜çº§åŠŸèƒ½
- **æŒ‡æ•°æˆåˆ†è‚¡**: æ”¯æŒä¸­è¯100ã€ä¸­è¯200ã€æ²ªæ·±300ã€ä¸­è¯500
- **æ‰¹é‡åˆ†æ**: åŒæ—¶å¤„ç†å¤šåªè‚¡ç¥¨
- **æ™ºèƒ½ç¼“å­˜**: 6å°æ—¶ç¼“å­˜æœºåˆ¶ï¼Œæå‡å“åº”é€Ÿåº¦
- **æ•°æ®æºæ ‡æ³¨**: æ˜ç¡®æ ‡æ³¨æ•°æ®æ¥æºå’Œå¯ä¿¡åº¦

## ğŸ¯ æ”¯æŒçš„è¾“å…¥æ ¼å¼

### è‚¡ç¥¨ä»£ç 
- **å•åªè‚¡ç¥¨**: `000001`, `600519`
- **å¤šåªè‚¡ç¥¨**: `000001,600519,000858`

### æŒ‡æ•°åç§°
- **ä¸Šè¯100**: `ä¸Šè¯100` æˆ– `SSE100`
- **ä¸­è¯300**: `ä¸­è¯300` æˆ– `CSI300`
- **ä¸­è¯200**: `ä¸­è¯200`
- **ä¸­è¯500**: `ä¸­è¯500`

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- uv (æ¨è) æˆ– pip

### å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨uvï¼ˆæ¨èï¼‰
source .venv/bin/activate
uv pip install -r requirements.txt

# æˆ–ä½¿ç”¨pip
pip install -r requirements.txt
```

### å¯åŠ¨æœåŠ¡
```bash
python main.py
```

æœåŠ¡å°†åœ¨ `http://localhost:8000` å¯åŠ¨

### è®¿é—®ç•Œé¢
- **ä¸»é¡µ**ï¼šhttp://localhost:8000
- **APIæ–‡æ¡£**ï¼šhttp://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**ï¼šhttp://localhost:8000/api/v1/health

## APIæ¥å£

### 1. è‚¡ç¥¨åˆ†æ
```
GET /api/v1/stocks/{input}
```

**å‚æ•°è¯´æ˜ï¼š**
- `input`ï¼šè‚¡ç¥¨ä»£ç æˆ–æŒ‡æ•°åç§°
  - æŒ‡æ•°ï¼šä¸Šè¯100, SSE100, ä¸­è¯300, CSI300
  - å•ä¸ªè‚¡ç¥¨ï¼š000001
  - å¤šä¸ªè‚¡ç¥¨ï¼š000001,600000,000002

**ç¤ºä¾‹ï¼š**
```bash
# åˆ†æå•ä¸ªè‚¡ç¥¨
curl "http://localhost:8000/api/v1/stocks/000001"

# åˆ†ææŒ‡æ•°
curl "http://localhost:8000/api/v1/stocks/CSI300"

# åˆ†æå¤šä¸ªè‚¡ç¥¨
curl "http://localhost:8000/api/v1/stocks/000001,600000,000002"
```

### 2. è·å–è‚¡ç¥¨ä¿¡æ¯
```
GET /api/v1/stocks/{input}/info
```

### 3. æ‰¹é‡åˆ†æ
```
POST /api/v1/batch
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "inputs": ["000001", "600000", "CSI300"],
  "force_refresh": false
}
```

### 4. æ”¯æŒæŒ‡æ ‡
```
GET /api/v1/indicators
```

### 5. ç¼“å­˜ç®¡ç†
```
GET /api/v1/cache/status    # ç¼“å­˜çŠ¶æ€
GET /api/v1/cache/clear     # æ¸…ç†ç¼“å­˜
```

### 6. å¯¼å‡ºæ•°æ®
```
GET /api/v1/export/{format}/{input}
```

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæ¨¡å—
```
src/
â”œâ”€â”€ config.py         # é…ç½®ç®¡ç†
â”œâ”€â”€ data_fetcher.py   # æ•°æ®è·å–ï¼ˆakShareé›†æˆï¼‰
â”œâ”€â”€ cache.py         # SQLiteç¼“å­˜ç³»ç»Ÿ
â”œâ”€â”€ indicators.py    # æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
â”œâ”€â”€ analyzer.py      # æ ¸å¿ƒåˆ†æé€»è¾‘
â”œâ”€â”€ visualizer.py    # å›¾è¡¨ç”Ÿæˆ
â””â”€â”€ api.py          # FastAPIæ¥å£
```

### æ•°æ®æµç¨‹
1. **è¾“å…¥è§£æ** â†’ è¯†åˆ«è‚¡ç¥¨/æŒ‡æ•°æ¨¡å¼
2. **æ•°æ®è·å–** â†’ akShare API + ç¼“å­˜ç­–ç•¥
3. **æŒ‡æ ‡è®¡ç®—** â†’ 30+æŠ€æœ¯æŒ‡æ ‡
4. **æ—¶é—´çª—å£** â†’ 6ä¸ªæ—¶é—´ç»´åº¦åˆ†æ
5. **ç»“æœè¾“å‡º** â†’ JSON + HTMLå›¾è¡¨

### ç¼“å­˜ç­–ç•¥
- **ç¼“å­˜æ—¶é—´**ï¼š6å°æ—¶è‡ªåŠ¨è¿‡æœŸ
- **ç¼“å­˜å±‚çº§**ï¼šåŸºç¡€æ•°æ®ã€ä¼°å€¼æ•°æ®ã€è´¢åŠ¡æ•°æ®ã€åˆ†æç»“æœ
- **è‡ªåŠ¨æ¸…ç†**ï¼šè¿‡æœŸæ•°æ®è‡ªåŠ¨åˆ é™¤

## ä½¿ç”¨ç¤ºä¾‹

### Pythonå®¢æˆ·ç«¯
```python
import requests

# åˆ†æå•ä¸ªè‚¡ç¥¨
response = requests.get("http://localhost:8000/api/v1/stocks/000001")
data = response.json()

if data['success']:
    print(f"è‚¡ç¥¨æ•°é‡: {data['data']['stock_count']}")
    print(f"JSONæ•°æ®: {data['json_url']}")
    print(f"å›¾è¡¨: {data['chart_url']}")
```

### JavaScriptå®¢æˆ·ç«¯
```javascript
// åˆ†æè‚¡ç¥¨
fetch('/api/v1/stocks/000001')
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      console.log('åˆ†æå®Œæˆ:', data.data.stock_count);
      window.open(data.chart_url, '_blank');
    }
  });
```

### å‘½ä»¤è¡Œ
```bash
# æŸ¥çœ‹APIæ–‡æ¡£
curl http://localhost:8000/api/v1/

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8000/api/v1/health

# æŸ¥çœ‹æ”¯æŒçš„æŒ‡æ ‡
curl http://localhost:8000/api/v1/indicators

# åˆ†æä¸­è¯300æŒ‡æ•°æˆåˆ†è‚¡
curl "http://localhost:8000/api/v1/stocks/CSI300"
```

## æ€§èƒ½ç‰¹ç‚¹

- **å“åº”é€Ÿåº¦**ï¼šç¼“å­˜å‘½ä¸­ < 100ms
- **å¹¶å‘æ”¯æŒ**ï¼šå¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒå¤šç”¨æˆ·
- **å†…å­˜å ç”¨**ï¼š< 100MBï¼ˆæ­£å¸¸ä½¿ç”¨ï¼‰
- **è¯·æ±‚é™åˆ¶**ï¼š60æ¬¡/åˆ†é’Ÿï¼Œä¿æŠ¤æ•°æ®æº

## é”™è¯¯å¤„ç†

æœåŠ¡åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š
- ç½‘ç»œè¿æ¥å¼‚å¸¸
- æ•°æ®æ ¼å¼é”™è¯¯
- APIé™æµå¤„ç†
- è‚¡ç¥¨ä»£ç éªŒè¯

## æ‰©å±•åŠŸèƒ½

### è‡ªå®šä¹‰æŒ‡æ ‡
å¯åœ¨ `src/indicators.py` ä¸­æ·»åŠ è‡ªå®šä¹‰æŠ€æœ¯æŒ‡æ ‡

### æ•°æ®æºåˆ‡æ¢
å¯åœ¨ `src/data_fetcher.py` ä¸­é…ç½®å¤šä¸ªæ•°æ®æº

### ç¼“å­˜ç­–ç•¥
å¯åœ¨ `src/config.py` ä¸­è°ƒæ•´ç¼“å­˜æ—¶é—´å’Œå¤§å°

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®æºé™åˆ¶**ï¼šä¾èµ–äºå…è´¹æ•°æ®æ¥å£ï¼Œå¯èƒ½å­˜åœ¨è®¿é—®é™åˆ¶
2. **äº¤æ˜“æ—¥å†**ï¼šä¸è‡ªåŠ¨è¯†åˆ«èŠ‚å‡æ—¥ï¼Œä½¿ç”¨è‡ªç„¶æ—¥è®¡ç®—æ—¶é—´çª—å£
3. **å®æ—¶æ€§**ï¼šéäº¤æ˜“æ—¶é—´è·å–çš„æ˜¯æœ€æ–°äº¤æ˜“æ—¥æ•°æ®
4. **æ•°é‡é™åˆ¶**ï¼šæŒ‡æ•°æ¨¡å¼å¯èƒ½åŒ…å«å¤§é‡è‚¡ç¥¨ï¼Œåˆ†ææ—¶é—´è¾ƒé•¿

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç½‘ç»œè¿æ¥é”™è¯¯**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç­‰å¾…åé‡è¯•
   - æŸ¥çœ‹ç¼“å­˜çŠ¶æ€

2. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   - æ£€æŸ¥ç«¯å£8000æ˜¯å¦è¢«å ç”¨
   - ç¡®è®¤ä¾èµ–åŒ…å®Œæ•´å®‰è£…
   - æŸ¥çœ‹æ—¥å¿—è¾“å‡º

3. **æ•°æ®è·å–å¤±è´¥**
   - æ£€æŸ¥è‚¡ç¥¨ä»£ç æ ¼å¼
   - ç¡®è®¤è‚¡ç¥¨å­˜åœ¨
   - æŸ¥çœ‹akShareæ¥å£çŠ¶æ€

### æ—¥å¿—æŸ¥çœ‹
æœåŠ¡å¯åŠ¨åä¼šæ˜¾ç¤ºè¯¦ç»†æ—¥å¿—ï¼ŒåŒ…æ‹¬ï¼š
- æ•°æ®è·å–çŠ¶æ€
- ç¼“å­˜å‘½ä¸­æƒ…å†µ
- è¯·æ±‚å¤„ç†æ—¶é—´
- é”™è¯¯ä¿¡æ¯

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨å¯¹åº”æ¨¡å—ä¸­å®ç°åŠŸèƒ½
2. åœ¨APIæ¥å£ä¸­æš´éœ²
3. æ›´æ–°æ–‡æ¡£
4. ç¼–å†™æµ‹è¯•

### ä»£ç é£æ ¼
- ä½¿ç”¨ç±»å‹æç¤º
- æ·»åŠ è¯¦ç»†æ³¨é‡Š
- éµå¾ªPEP8è§„èŒƒ
- å¤„ç†æ‰€æœ‰å¼‚å¸¸

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒåŸºç¡€è‚¡ç¥¨åˆ†æåŠŸèƒ½
- å®ç°æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- æä¾›Web APIæ¥å£
- æ”¯æŒäº¤äº’å¼å›¾è¡¨ç”Ÿæˆ